<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Punto de Venta - Revenge POS</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/punto-venta.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">‚ö° REVENGE</div>
        <div style="font-size: 0.85rem; opacity: 0.8; margin-top: 0.5rem;">POS System</div>
      </div>
      <nav>
        <ul class="sidebar-menu" id="sidebarMenu"></ul>
      </nav>
      
      <div class="sidebar-footer">
        <button onclick="cerrarSesion()" class="btn btn-danger" style="width: 100%;">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Navbar -->
      <nav class="navbar">
        <div>
          <h2 style="color: var(--color-azul); margin: 0;">
            <i class="fas fa-cash-register"></i> Punto de Venta
          </h2>
        </div>
        <div class="navbar-user">
          <div class="user-info">
            <div class="user-name" id="userName">Usuario</div>
            <div class="user-role" id="userRole">Rol</div>
          </div>
        </div>
      </nav>

      <!-- Content -->
      <div class="content">
        <div class="pos-container">
          <!-- Panel Izquierdo: B√∫squeda de Productos -->
          <div class="pos-left">
            <div class="search-section">
              <h3><i class="fas fa-search"></i> Buscar Producto</h3>
              
              <form id="formBuscar" class="search-form">
                <div class="form-group">
                  <label>C√≥digo de Barras</label>
                  <input 
                    type="text" 
                    id="inputCodigo" 
                    class="form-control" 
                    placeholder="Escanea o escribe el c√≥digo"
                    autofocus
                  >
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                  <i class="fas fa-search"></i> Buscar
                </button>
              </form>

              <!-- Resultado de b√∫squeda -->
              <div id="resultadoBusqueda" class="search-result hidden"></div>
            </div>
          </div>

          <!-- Panel Derecho: Carrito de Venta -->
          <div class="pos-right">
            <div class="cart-section">
              <h3><i class="fas fa-shopping-cart"></i> Carrito de Venta</h3>
              
              <!-- Items del carrito -->
              <div class="cart-items" id="cartItems">
                <div class="empty-cart">
                  <i class="fas fa-shopping-cart"></i>
                  <p>El carrito est√° vac√≠o</p>
                  <small>Busca y agrega productos</small>
                </div>
              </div>

              <!-- Totales -->
              <div class="cart-totals">
                <div class="total-row">
                  <span>Subtotal:</span>
                  <span id="subtotal">$0.00</span>
                </div>
                <div class="total-row">
                  <span>IVA (16%):</span>
                  <span id="iva">$0.00</span>
                </div>
                <div class="total-row total-final">
                  <span>TOTAL:</span>
                  <span id="total">$0.00</span>
                </div>
              </div>

              <!-- Informaci√≥n adicional -->
              <div class="additional-info">
                <div class="form-group">
                  <label>M√©todo de Pago</label>
                  <select id="metodoPago" class="form-control">
                    <option value="1">üíµ Efectivo</option>
                    <option value="2">üí≥ Tarjeta de Cr√©dito</option>
                    <option value="3">üí≥ Tarjeta de D√©bito</option>
                    <option value="4">üè¶ Transferencia</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>Nombre del Cliente (Opcional)</label>
                  <input 
                    type="text" 
                    id="clienteNombre" 
                    class="form-control" 
                    placeholder="Cliente general"
                  >
                </div>
              </div>

              <!-- Botones de acci√≥n -->
              <div class="cart-actions">
                <button onclick="limpiarCarrito()" class="btn btn-secondary btn-block">
                  <i class="fas fa-trash"></i> Limpiar
                </button>
                <button onclick="finalizarVenta()" class="btn btn-success btn-block">
                  <i class="fas fa-check"></i> FINALIZAR VENTA
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de Confirmaci√≥n -->
  <div id="modalExito" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-check-circle"></i> Venta Exitosa</h3>
      </div>
      <div class="modal-body">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h2 id="totalVenta">$0.00</h2>
        <p>Folio: <strong id="folioVenta">V-000000</strong></p>
        <p>La venta se ha registrado correctamente</p>
      </div>
      <div class="modal-footer">
        <button onclick="cerrarModal()" class="btn btn-primary">
          <i class="fas fa-plus"></i> Nueva Venta
        </button>
        <button onclick="imprimirTicket()" class="btn btn-secondary">
          <i class="fas fa-print"></i> Imprimir Ticket
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/api.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/punto-venta.js"></script>
</body>
</html>
